# get current location
DIR=$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )

echo "running from $DIR..."

# **********************************
# GIT
#

# remove ~/.gitconfig
if [ -f ~/.gitconfig ]; then
  echo "found old ~/.gitconfig - removing..."
  rm ~/.gitconfig
fi

# link ~/.gitconfig
echo "sym linking new ~/.gitconfig with $DIR/.gitconfig!\n"
ln -s $DIR/.gitconfig ~/.gitconfig

# *********************************
# VIM
#

# install Vundle ( vim pkg manager )
if [ -d ~/.vim/bundle/Vundle.vim ]; then
  echo "found old ~/.vim/bundle/Vundle.vim - removing..."
  rm -rf ~/.vim/bundle/Vundle.vim
fi

echo "cloning Vundle into ~/.vim/bundle/Vundle.vim"
git clone https://github.com/gmarik/Vundle.vim.git ~/.vim/bundle/Vundle.vim


# remove ~/.vimrc
if [ -f ~/.vimrc ]; then
  echo "found old ~/.vimrc - removing..."
  rm ~/.vimrc
fi

# link ~/.vimrc
echo  "sym linking new ~/.vimrc with $DIR/.vimrc\n"
ln -s $DIR/.vimrc ~/.vimrc

# *********************************
# pokemon say
#

echo $'installing pokemonsay\n'
brew install fortune
brew install coreutils
ln -s /usr/local/bin/gshuf /usr/local/bin/shuf

if [ -d ~/Projects/pokemonsay ]; then
  echo "found pokemonsay dir - removing..."
  rm -rf ~/Projects/pokemonsay
fi

echo $'cloning pokemonsay'
git clone http://github.com/possatti/pokemonsay ~/Projects/pokemonsay && cd ~/Projects/pokemonsay && ./install.sh

brew install cowsay

# *********************************
# highlight

echo $'installing highlight'
brew install highlight

# *********************************
# httpstat

echo $'installing httpstat'
brew install httpstat

# *********************************
# zsh
#
if [ -L ~/.zshrc ]; then
  echo "found .zshrc - removing..."
  rm ~/.zshrc
fi

echo $'linking .zshrc\n'
ln -s $DIR/.zshrc ~/.zshrc

echo $'installing zsh-syntax-highlighting'
git clone https://github.com/zsh-users/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting



if [ -L ~/.oh-my-zsh/custom/stefanjudis.zsh-theme ]; then
  echo "found old stefanjudis.zsh-theme - removing..."
  rm ~/.oh-my-zsh/custom/stefanjudis.zsh-theme
fi

echo $'linking stefanjudis zsh-theme\n'
ln -s $DIR/stefanjudis.zsh-theme ~/.oh-my-zsh/custom/stefanjudis.zsh-theme




if [ -L ~/.oh-my-zsh/custom/aliases.zsh ]; then
  echo "found old aliases.zsh - removing..."
  rm ~/.oh-my-zsh/custom/aliases.zsh
fi

echo $'linking aliases.zsh\n'
ln -s $DIR/aliases.zsh ~/.oh-my-zsh/custom/aliases.zsh




if [ -L ~/.oh-my-zsh/custom/functions.zsh ]; then
  echo "found old functions.zsh - removing..."
  rm ~/.oh-my-zsh/custom/functions.zsh
fi

echo $'linking functions.zsh\n'
ln -s $DIR/functions.zsh ~/.oh-my-zsh/custom/functions.zsh

echo $'install pygmentize\n'
sudo easy_install Pygments

if [ -d ~/.oh-my-zsh/custom/plugins/git-open ]; then
  echo "found zsh plugin git-open  - removing..."
  rm -rf ~/.oh-my-zsh/custom/plugins/git-open
fi

git clone git@github.com:paulirish/git-open.git ~/.oh-my-zsh/custom/plugins/git-open


# *************************************
# node
#
echo $'installing node via nvm'
curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.31.4/install.sh | bash
echo $'installed nvm\n'

# loading nvm for now
export NVM_DIR="/usr/local/opt/nvm"
[ -s "$NVM_DIR/nvm.sh" ] && . "$NVM_DIR/nvm.sh"

nvm install stable
nvm alias default stable
# workaround this bug
# https://github.com/creationix/nvm/issues/855
nvm use --delete-prefix stable

echo $'updating npm\n'
npm i -g npm

# *************************************
# hyperterm
#
if [ -L ~/.oh-my-zsh/custom/functions.zsh ]; then
  echo "found old .hyperterm.js - removing..."
  rm ~/.hyperterm.js
fi

echo $'linking .hyperterm.js\n'
ln -s $DIR/.hyperterm.js ~/.hyperterm.js



bash $DIR/mac.sh
bash $DIR/npm.sh
